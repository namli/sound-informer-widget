# Active Context: Sound Informer Widget

## Current Work Focus

**[26-01-17-20-12] MILESTONE –î–û–°–¢–ò–ì–ù–£–¢: –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞** ‚úÖ

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∏–¥–∂–µ—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é. –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ –≤ production mode. –í–∏–¥–∂–µ—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: –≤–∏–¥–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω, –≤—Å–µ —ç—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.

## Recent Changes

### 26-01-17-20-12 ‚Äî –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Tailwind CSS 4.x, @tailwindcss/postcss, shadcn/ui, mapbox-gl, react-map-gl, recharts)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω Tailwind CSS 4.x —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `si-` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å—Ç–∏–ª–µ–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω shadcn/ui —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ Card –∏ Button
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω Vite library mode –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤ IIFE —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
  - `MapView` ‚Äî –∫–∞—Ä—Ç–∞ Mapbox —Å react-map-gl
  - `SensorMarker` ‚Äî –º–∞—Ä–∫–µ—Ä—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π pulse
  - `NoisePopup` ‚Äî –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
  - `NoiseChart` ‚Äî —Å—Ç–æ–ª–±—á–∞—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫ —Å recharts
  - `SoundInformerWidget` ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω entry point `widget.tsx` —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º API `window.SoundInformer`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã `init()` –∏ `destroy()` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã mock-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ü–∞—Ä–∏–∂–∞, –ë–∞—Ä—Å–µ–ª–æ–Ω—ã –∏ –î–∞—Ö–∞–±–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ 4 —è–∑—ã–∫–∞ (en, fr, es, ru)
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞: `dist/sound-informer.iife.js` (2.7 MB), `dist/sound-informer.css` (40 KB)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `test.html` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω README —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å Tailwind CSS 4.x (—Ç—Ä–µ–±—É–µ—Ç—Å—è @tailwindcss/postcss)
- üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç –≤ widget.tsx

## Next Steps

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º Mapbox —Ç–æ–∫–µ–Ω–æ–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ Chrome, Firefox, Safari, Edge
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Å—Ç–∏–ª–µ–π (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Ö–æ—Å—Ç-—Å–∞–π—Ç–æ–º)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–æ–≤)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞ (2.7 MB ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å code splitting –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å troubleshooting guide
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å browser compatibility

## Active Decisions and Considerations

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:
1. **Vite Library Mode** ‚Äî –≤—ã–±—Ä–∞–Ω –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤–∏–¥–∂–µ—Ç–∞ –≤ –æ–¥–∏–Ω JS —Ñ–∞–π–ª (IIFE —Ñ–æ—Ä–º–∞—Ç)
2. **React 19.x** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ React –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
3. **Tailwind CSS 4.x** ‚Äî –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å—Ç–∏–ª–µ–π
4. **shadcn/ui** ‚Äî –¥–ª—è –≥–æ—Ç–æ–≤—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (card, button)
5. **Mapbox GL** ‚Äî –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã (—á–µ—Ä–µ–∑ react-map-gl)
6. **Recharts** ‚Äî –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å shadcn)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:
1. **–ò–∑–æ–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `si-` –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
2. **Mock –¥–∞–Ω–Ω—ã–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ
3. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π API** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ `window.SoundInformer` –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è:
- –ù—É–∂–Ω–∞ –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Shadow DOM –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ —Å—Ç–∏–ª–µ–π?
- –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)?
- –ù—É–∂–Ω–∞ –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ?

## Important Patterns and Preferences

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –ø–∞–ø–∫–µ `src/components/`
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã shadcn –≤ `src/ui/`
- –¢–∏–ø—ã –≤ `src/types/index.ts`
- –£—Ç–∏–ª–∏—Ç—ã –≤ `src/lib/utils.ts`
- –î–∞–Ω–Ω—ã–µ –≤ `src/data/mockSensors.ts`

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Tailwind CSS –∫–ª–∞—Å—Å–æ–≤
- –ü—Ä–µ—Ñ–∏–∫—Å `si-` –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –≤–∏–¥–∂–µ—Ç–∞
- CSS Variables –¥–ª—è —Ç–µ–º–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

### –¢–∏–ø–∏–∑–∞—Ü–∏—è:
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (Sensor, NoiseReading, SoundInformerConfig)
- –≠–∫—Å–ø–æ—Ä—Ç —Ç–∏–ø–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö

## Learnings and Project Insights

### –ò–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Mapbox —Ç–æ–∫–µ–Ω–∞** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å URL restrictions –¥–ª—è Public token
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–¥–∞–Ω–∏—è –≤—ã—Å–æ—Ç—ã (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, vh, aspect-ratio)
3. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ —Å fallback –Ω–∞ 'en'
4. **Mock –¥–∞–Ω–Ω—ã–µ** ‚Äî –¥–∞—Ç—á–∏–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ —Ç—Ä–µ—Ö –≥–æ—Ä–æ–¥–∞—Ö: –ü–∞—Ä–∏–∂, –ë–∞—Ä—Å–µ–ª–æ–Ω–∞, –î–∞—Ö–∞–±

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ö–æ—Å—Ç-—Å–∞–π—Ç—É:
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–Ω–∏–º–∞–µ—Ç 100% —à–∏—Ä–∏–Ω—ã
- –í—ã—Å–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `height` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ES6+ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–π–ª–æ–≤ Mapbox

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏:
- –î–∞–Ω–Ω—ã–µ —Ñ–µ–π–∫–æ–≤—ã–µ (mock), backend –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –ù–µ—Ç real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞)
- –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏/–ø–æ–∏—Å–∫–∞ –¥–∞—Ç—á–∏–∫–æ–≤
